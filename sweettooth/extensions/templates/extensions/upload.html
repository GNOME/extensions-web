{% extends "base.html" %}

{% block extra-messages %}
  {{ block.super }}
  {% for error in errors %}
  <p class="message error">
    {{ error }}
  </p>
  {% endfor %}
{% endblock %}

{% block body %}
<div class="step">
  <p>
    Upload your extension Zip file to submit it for review. Later versions can be uploaded using the same form. Once your extension has been reviewed you will be notified of the result by e-mail.
  </p>
  <p>
    Please see the <a href="https://gjs.guide/extensions/review-guidelines/review-guidelines.html">Review Guidelines</a> to learn what is required for approval.
  </p>
  <p>
    If this is your first extension, please see the documentation on <a href="https://gjs.guide/extensions">gjs.guide</a> for directions on creating an extension and preparing it for upload.
  </p>

  <form enctype="multipart/form-data" action="" method="POST" class="form-horizontal">
    {% csrf_token %}

    {{ form.non_field_errors }}

    <div class="form-group row">
        <div class="col-sm-12{% if field.errors %} has-error{% endif %}">
            {{ form.source }}
            {% if form.source.errors %}
            <div class="help-block">
            {% for error in form.source.errors %}
                <p>{{ error|escape }}</p>
            {% endfor %}
            </div>
            {% endif %}
        </div>
    </div>

    {% for field in form.visible_fields %}
    {% if field.name != 'source' %}
    <div class="form-group row">
      <div class="col-sm-8 col-form-label">
        <label for="{{ field.id_for_label }}">{{ field.label }}</label>
        {% if field.help_text %}
        <div>
          <small class="form-text text-muted">{{ field.help_text }}</small>
        </div>
        {% endif %}
      </div>
      <div class="col-sm-4{% if field.errors %} has-error{% endif %}">
        {{ field }}
        {% if field.errors %}
        <div class="help-block">
          {% for error in field.errors %}
            <p>{{ error|escape }}</p>
          {% endfor %}
        </div>
        {% endif %}
      </div>
    </div>
    {% endif %}
    {% endfor %}

    <div class="fieldWrapper">
        <button type="submit" class="btn btn-primary">Upload extension</button>
    </div>
  </form>

</div>
{% endblock %}

{% block navclass %}upload{% endblock %}
